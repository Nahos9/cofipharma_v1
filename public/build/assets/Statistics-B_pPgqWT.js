import{r as S,j as e,a as v,f as F}from"./app-d0oEnwzI.js";import{A}from"./AuthenticatedLayout-CBoZzwZ7.js";import{s as B,a as D,u as E,e as _,g as L,C as N,T as M,c as P,b as r,d as s,S as T,f as b,B as f,G as o,h as a,L as k,P as w,i as I,j as R,k as V,l as G,m as J,p as O,n as H,o as U,A as z}from"./index-CrE4M5NL.js";import{c as K}from"./clsx-B-dksMZM.js";import"./ApplicationLogo-B99VSr_G.js";import"./Dropdown-Dyv-yBr9.js";import"./transition-CW-mGLKu.js";import"./index-p9hTNmV-.js";function Q(x={}){const{themeId:t,defaultTheme:d,defaultClassName:c="MuiBox-root",generateClassName:i}=x,m=B("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(D);return S.forwardRef(function(h,u){const n=E(d),{className:j,component:p="div",...g}=_(h);return e.jsx(m,{as:p,ref:u,className:K(j,i?i(c):c),theme:t&&n[t]||n,...g})})}const W=L("MuiBox",["root"]),X=P(),C=Q({themeId:M,defaultTheme:X,defaultClassName:W.root,generateClassName:N.generate});I.register(R,V,G,J,O,H,U,z);function re({auth:x,statistiques:t}){const[d,c]=S.useState({date_debut:t.filtres.date_debut,date_fin:t.filtres.date_fin}),i=n=>{const{name:j,value:p}=n.target;c(g=>({...g,[j]:p}))},m=()=>{F.get(route("statistiques"),d,{preserveState:!0,preserveScroll:!0})},y=()=>{window.location.href=route("statistiques.export",d)},l={labels:t.demandesParJour.map(n=>n.date),datasets:[{label:"Demandes par jour",data:t.demandesParJour.map(n=>n.total),borderColor:"rgb(75, 192, 192)",tension:.1},{label:"Montant total par jour",data:t.demandesParJour.map(n=>n.montant_total),borderColor:"rgb(255, 99, 132)",tension:.1,yAxisID:"y1"}]},h={labels:["En attente","Validées","Rejetées","Débloquées"],datasets:[{data:[t.demandesEnAttente,t.demandesValidees,t.demandesRejetees,t.demandesDebloquees],backgroundColor:["rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(255, 99, 132)","rgb(54, 162, 235)"]}]},u={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Évolution des demandes et montants"}},scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Nombre de demandes"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Montant total"},grid:{drawOnChartArea:!1}}}};return e.jsxs(A,{user:x.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Statistiques"}),children:[e.jsx(v,{title:"Statistiques"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx(r,{className:"mb-6",children:e.jsx(s,{children:e.jsxs(T,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(b,{label:"Date de début",type:"date",name:"date_debut",value:d.date_debut,onChange:i,InputLabelProps:{shrink:!0}}),e.jsx(b,{label:"Date de fin",type:"date",name:"date_fin",value:d.date_fin,onChange:i,InputLabelProps:{shrink:!0}}),e.jsx(f,{variant:"contained",onClick:m,children:"Filtrer"}),e.jsx(f,{variant:"outlined",onClick:y,children:"Exporter CSV"})]})})}),e.jsxs(o,{container:!0,spacing:3,children:[e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(r,{children:e.jsxs(s,{children:[e.jsx(a,{color:"textSecondary",gutterBottom:!0,children:"Total des demandes"}),e.jsx(a,{variant:"h4",children:t.totalDemandes}),e.jsxs(a,{variant:"body2",color:"textSecondary",children:["Montant total: ",t.montantTotal.toLocaleString()," FCFA"]}),e.jsxs(a,{variant:"body2",color:"textSecondary",children:["Moyenne: ",t.moyenneMontant.toLocaleString()," FCFA"]})]})})}),e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(r,{children:e.jsxs(s,{children:[e.jsx(a,{color:"textSecondary",gutterBottom:!0,children:"Demandes en attente"}),e.jsx(a,{variant:"h4",children:t.demandesEnAttente}),e.jsxs(a,{variant:"body2",color:"textSecondary",children:["Montant: ",t.montantEnAttente.toLocaleString()," FCFA"]})]})})}),e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(r,{children:e.jsxs(s,{children:[e.jsx(a,{color:"textSecondary",gutterBottom:!0,children:"Demandes validées"}),e.jsx(a,{variant:"h4",children:t.demandesValidees}),e.jsxs(a,{variant:"body2",color:"textSecondary",children:["Montant: ",t.montantValide.toLocaleString()," FCFA"]})]})})}),e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(r,{children:e.jsxs(s,{children:[e.jsx(a,{color:"textSecondary",gutterBottom:!0,children:"Demandes rejetées"}),e.jsx(a,{variant:"h4",children:t.demandesRejetees}),e.jsxs(a,{variant:"body2",color:"textSecondary",children:["Montant: ",t.montantRejete.toLocaleString()," FCFA"]})]})})}),e.jsx(o,{item:!0,xs:12,md:8,children:e.jsx(r,{children:e.jsx(s,{children:e.jsx(C,{sx:{height:400},children:e.jsx(k,{options:u,data:l})})})})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(r,{children:e.jsx(s,{children:e.jsx(C,{sx:{height:400},children:e.jsx(w,{data:h})})})})})]})]})})]})}export{re as default};
