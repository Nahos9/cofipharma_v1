import{S as de,r as d,f as G,j as e,a as me}from"./app-D-K7TukB.js";import{y as v,N as ue,L as pe,F as xe}from"./FooterHome-La0SywFV.js";import{I as o}from"./InputLabel-CD7_0c0Y.js";import{T as m}from"./TextInput-BuAQB65R.js";import{I as f}from"./InputError-0C59V2bW.js";import{P as he}from"./PrimaryButton-DRiLZRUB.js";import{r as ve}from"./docx-preview-C4t8OxSY.js";import"./button-DVynIo8b.js";import"./clsx-B-dksMZM.js";import"./createLucideIcon-DDjgJCFR.js";import"./x-D1itBMLf.js";import"./mail-iATylgNq.js";import"./phone-CNKtuEAX.js";const Ae=({auth:F,flash:j})=>{const{data:t,setData:i,post:Q,processing:U,errors:h,reset:Z}=de({numero_compte:"",phone:"",email:"",nom:"",prenom:"",status:"",montant:"",fichiers:[],civility:"",address:"",city:"",bp:"",piece_identite:"",numero_piece_identite:"",date_naissance:"",lieu_naissance:"",nationalite:"",profession:"",employeur:"",date_de_delivrance_piece_identite:"",mode_paiement:"",carte:"",mention_text:"",mention_accepted:!1,mention_accepted_at:""}),[l,A]=d.useState(1),[ge,fe]=d.useState(""),[je,_e]=d.useState(!1),[x,V]=d.useState(null),_=d.useRef(null),P=d.useRef(!1),b=d.useRef({x:0,y:0}),[R,M]=d.useState(""),[D,L]=d.useState(""),[y,z]=d.useState(""),[N,B]=d.useState(""),[O,w]=d.useState(!1),C=d.useRef(null),[I,X]=d.useState("");d.useEffect(()=>{j.success&&(v.success(j.success,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,className:"bg-green-500 text-white",bodyClassName:"font-bold"}),Z(),setTimeout(()=>{G.visit(route("welcome"))},1500)),j.error&&v.error(j.error)},[j]);const ee=l===1?20:l===2?40:l===3?60:l===4?80:100,te=()=>t.nom&&t.prenom&&t.email&&t.phone&&t.numero_compte&&t.montant,se=async s=>{if(s.preventDefault(),l===1&&!te()){v.error("Veuillez compléter les champs obligatoires de l'étape 1");return}if(l===3&&!x){v.error("Veuillez signer avant de continuer.");return}if(l===5)return;const a=Math.min(5,l+1);A(a)},ae=s=>{s.preventDefault(),A(a=>Math.max(1,a-1))},ne=s=>{if(s.preventDefault(),!t.mention_accepted){v.error("Vous devez accepter les conditions avant de soumettre.");return}if((t.mention_text||"").trim().toLowerCase()!=="j’ai lu et approuvé"&&(t.mention_text||"").trim().toLowerCase()!=="j'ai lu et approuvé"){v.error("Veuillez saisir exactement: 'J’ai lu et approuvé'.");return}try{const a=new FormData;if(a.append("numero_compte",t.numero_compte||""),a.append("phone",t.phone||""),a.append("email",t.email||""),a.append("nom",t.nom||""),a.append("prenom",t.prenom||""),a.append("status",t.status||""),a.append("montant",t.montant||""),a.append("civility",t.civility||""),a.append("address",t.address||""),a.append("city",t.city||""),a.append("bp",t.bp||""),a.append("piece_identite",t.piece_identite||""),a.append("numero_piece_identite",t.numero_piece_identite||""),a.append("date_naissance",t.date_naissance||""),a.append("lieu_naissance",t.lieu_naissance||""),a.append("nationalite",t.nationalite||""),a.append("profession",t.profession||""),a.append("employeur",t.employeur||""),a.append("date_de_delivrance_piece_identite",t.date_de_delivrance_piece_identite||""),a.append("mode_paiement",t.mode_paiement||""),a.append("carte",t.carte||""),a.append("mention_text",t.mention_text||""),a.append("mention_accepted",t.mention_accepted?"1":"0"),a.append("mention_accepted_at",t.mention_accepted_at||""),t.fichiers&&t.fichiers.length&&Array.from(t.fichiers).forEach((n,c)=>{a.append(`fichiers[${c}]`,n)}),x)try{const n=atob(x.split(",")[1]),c=x.split(",")[0].split(":")[1].split(";")[0],u=new ArrayBuffer(n.length),S=new Uint8Array(u);for(let p=0;p<n.length;p++)S[p]=n.charCodeAt(p);const r=new Blob([u],{type:c||"image/png"});a.append("signature",r,"signature.png")}catch{}G.post(route("av_salaire.store"),a,{forceFormData:!0})}catch{Q(route("av_salaire.store"))}},T=()=>{const s=_.current;if(!s)return;const a=window.devicePixelRatio||1,n=s.getBoundingClientRect();s.width=n.width*a,s.height=n.height*a;const c=s.getContext("2d");c.scale(a,a),c.lineWidth=2,c.lineCap="round",c.strokeStyle="#111827",c.fillStyle="#ffffff",c.fillRect(0,0,n.width,n.height)};d.useEffect(()=>{T();const s=()=>T();return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const H=(s,a)=>{const n=s.getBoundingClientRect(),c=a.touches?a.touches[0].clientX:a.clientX,u=a.touches?a.touches[0].clientY:a.clientY;return{x:c-n.left,y:u-n.top}},$=s=>{const a=_.current;a&&(P.current=!0,b.current=H(a,s))},W=s=>{const a=_.current;if(!a||!P.current)return;const n=a.getContext("2d"),{x:c,y:u}=H(a,s);n.beginPath(),n.moveTo(b.current.x,b.current.y),n.lineTo(c,u),n.stroke(),b.current={x:c,y:u},s.preventDefault()},E=()=>{P.current=!1},ie=()=>{T(),V(null)},re=()=>{const s=_.current;if(!s)return;const a=s.toDataURL("image/png");if(!a){v.error("Veuillez ajouter une signature.");return}V(a),v.success("Signature enregistrée.")};return d.useEffect(()=>{(async()=>{var u,S;if(l!==4)return;X("");let a="";try{if(x){const r=atob(x.split(",")[1]),p=x.split(",")[0].split(":")[1].split(";")[0],k=new ArrayBuffer(r.length),le=new Uint8Array(k);for(let g=0;g<r.length;g++)le[g]=r.charCodeAt(g);const oe=new Blob([k],{type:p||"image/png"}),q=new FormData;q.append("signature",oe,"preview-signature.png");const ce=((u=document.querySelector('meta[name="csrf-token"]'))==null?void 0:u.getAttribute("content"))||((S=window.Laravel)==null?void 0:S.csrfToken)||"",J=(g=>{const Y=document.cookie.match(new RegExp("(?:^|; )"+g.replace(/([.$?*|{}()\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return Y?decodeURIComponent(Y[1]):""})("XSRF-TOKEN"),K=await fetch(route("contracts.previewSignatureUpload"),{method:"POST",body:q,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":ce||J,"X-XSRF-TOKEN":J},credentials:"same-origin"});K.ok&&(a=(await K.json()).signature_relative_path||"")}}catch{}const n=new URLSearchParams({first_name:t.prenom||"",last_name:t.nom||"",email:t.email||"",numero_compte:t.numero_compte||"",montant:t.montant||"",phone:t.phone||"",mode_paiement:t.mode_paiement||"",mention_text:t.mention_text||"",mention_accepted:t.mention_accepted||!1,mention_accepted_at:t.mention_accepted_at||"",bp:t.bp||"",employeur:t.employeur||"",civility:t.civility||"",address:t.address||"",city:t.city||"",piece_identite:t.piece_identite||"",numero_piece_identite:t.numero_piece_identite||"",date_de_delivrance_piece_identite:t.date_de_delivrance_piece_identite||"",date_naissance:t.date_naissance||"",lieu_naissance:t.lieu_naissance||"",nationalite:t.nationalite||"",profession:t.profession||"",signature_relative_path:a||""}),c=route("av_salaire.contracts.previewDocx")+`?${n.toString()}`;fetch(c,{credentials:"include"}).then(async r=>{const p=await r.json().catch(()=>null);if(!r.ok){const k=p&&(p.error||p.message)||"Preview contrat indisponible";throw new Error(k)}return p}).then(r=>{M(r.officeViewUrl||r.office_view_url||""),L(r.googleViewUrl||r.google_view_url||""),z(r.docxUrl||r.docx_url||""),B(r.docxRelativeUrl||r.docx_relative_url||""),w(!1)}).catch(r=>{X((r==null?void 0:r.message)||"Preview contrat indisponible"),M(""),L(""),z(""),B(""),w(!0)})})()},[l,t,x]),d.useEffect(()=>{(async()=>{if(l===4&&!(!N&&!y)&&C.current)try{const n=await fetch(N||y,{credentials:"same-origin"});if(!n.ok)throw new Error("Docx non accessible");const u=await(await n.blob()).arrayBuffer();C.current.innerHTML="",await ve(u,C.current,void 0,{className:"docx-view",inWrapper:!0,ignoreWidth:!1,ignoreHeight:!1}),w(!1)}catch{w(!0)}})()},[l,y,N]),e.jsxs("div",{children:[e.jsx(ue,{user:F==null?void 0:F.user}),e.jsx(me,{title:"demande avance "}),e.jsx(pe,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),e.jsxs("div",{className:"mx-auto p-4 sm:p-6 lg:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Demande d'Avance sur Salaire"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${ee}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-2",children:[e.jsx("span",{children:"Étape 1: Formulaire"}),e.jsx("span",{children:"Étape 2: Récapitulatif"}),e.jsx("span",{children:"Étape 3: Signature"}),e.jsx("span",{children:"Étape 4: Contrat"}),e.jsx("span",{children:"Étape 5: Acceptation"})]})]}),e.jsxs("form",{onSubmit:l===5?ne:se,className:"border p-2 shadow-lg",children:[l===1&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2",children:[e.jsx(o,{htmlFor:"civility",value:"Civilité"}),e.jsxs("select",{id:"civility",value:t.civility,onChange:s=>i("civility",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Sélectionnez"}),e.jsx("option",{value:"mr",children:"Mr"}),e.jsx("option",{value:"mme",children:"Mme"})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 mt-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"nom",value:"Votre nom"}),e.jsx(m,{id:"nom",type:"text",name:"nom",value:t.nom,className:"mt-1 block w-full",onChange:s=>i("nom",s.target.value)}),e.jsx(f,{message:h.nom,className:"mt-2"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"prenom",value:"Votre prénom"}),e.jsx(m,{id:"prenom",type:"text",name:"prenom",value:t.prenom,className:"mt-1 block w-full",onChange:s=>i("prenom",s.target.value)}),e.jsx(f,{message:h.prenom,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 mt-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"email",value:"Votre email"}),e.jsx(m,{id:"email",type:"text",name:"email",value:t.email,className:"mt-1 block w-full",onChange:s=>i("email",s.target.value)}),e.jsx(f,{message:h.email,className:"mt-2"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"phone",value:"Numéro de téléphone"}),e.jsx(m,{id:"phone",type:"text",name:"phone",value:t.phone,className:"mt-1 block w-full",onChange:s=>i("phone",s.target.value)}),e.jsx(f,{message:h.phone,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 mt-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"numero_compte",value:"Numéro de compte courant"}),e.jsx(m,{id:"numero_compte",type:"text",name:"numero_compte",value:t.numero_compte,className:"mt-1 block w-full",inputMode:"numeric",pattern:"^371.*",onInvalid:s=>s.currentTarget.setCustomValidity("Le numéro de compte doit commencer par 371"),onInput:s=>s.currentTarget.setCustomValidity(""),onChange:s=>{const a=s.target.value;a&&!a.startsWith("371")?s.target.setCustomValidity("Le numéro de compte doit commencer par 371"):s.target.setCustomValidity(""),i(n=>({...n,numero_compte:a}))}}),e.jsx(f,{message:h.numero_compte,className:"mt-2"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"montant",value:"Montant"}),e.jsx(m,{id:"montant",type:"text",name:"montant",value:t.montant,className:"mt-1 block w-full",onChange:s=>i("montant",s.target.value)}),e.jsx(f,{message:h.montant,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 mt-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"address",value:"Adresse"}),e.jsx(m,{id:"address",type:"text",name:"address",value:t.address,className:"mt-1 block w-full",onChange:s=>i("address",s.target.value)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"city",value:"Ville"}),e.jsx(m,{id:"city",type:"text",name:"city",value:t.city,className:"mt-1 block w-full",onChange:s=>i("city",s.target.value)})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 mt-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"bp",value:"BP"}),e.jsx(m,{id:"bp",type:"text",name:"bp",value:t.bp,className:"mt-1 block w-full",onChange:s=>i("bp",s.target.value)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"profession",value:"profession"}),e.jsx(m,{id:"profession",type:"text",name:"profession",value:t.profession,className:"mt-1 block w-full",onChange:s=>i("profession",s.target.value)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"employeur",value:"Employeur"}),e.jsx(m,{id:"employeur",type:"text",name:"employeur",value:t.employeur,className:"mt-1 block w-full",onChange:s=>i("employeur",s.target.value)})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 mt-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"piece_identite",value:"Pièce d'identité"}),e.jsxs("select",{id:"piece_identite",value:t.piece_identite,onChange:s=>i("piece_identite",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Sélectionnez"}),e.jsx("option",{value:"cni",children:"Carte nationale d'identité"}),e.jsx("option",{value:"passport",children:"Passeport"}),e.jsx("option",{value:"permis de conduire",children:"Permis de conduire"}),e.jsx("option",{value:"cart_sej",children:"Carte de séjour"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"numero_piece_identite",value:"Numéro de la pièce"}),e.jsx(m,{id:"numero_piece_identite",type:"text",name:"numero_piece_identite",value:t.numero_piece_identite,className:"mt-1 block w-full",onChange:s=>i("numero_piece_identite",s.target.value)})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 mt-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"date_de_delivrance_piece_identite",value:"Date de délivrance de la pièce"}),e.jsx(m,{id:"date_de_delivrance_piece_identite",type:"date",name:"date_de_delivrance_piece_identite",value:t.date_de_delivrance_piece_identite,className:"mt-1 block w-full",onChange:s=>i("date_de_delivrance_piece_identite",s.target.value)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"date_naissance",value:"Date de naissance"}),e.jsx(m,{id:"date_naissance",type:"date",name:"date_naissance",value:t.date_naissance,className:"mt-1 block w-full",onChange:s=>i("date_naissance",s.target.value)})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 mt-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"lieu_naissance",value:"Lieu de naissance"}),e.jsx(m,{id:"lieu_naissance",type:"text",name:"lieu_naissance",value:t.lieu_naissance,className:"mt-1 block w-full",onChange:s=>i("lieu_naissance",s.target.value)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{htmlFor:"nationalite",value:"Nationalité"}),e.jsx(m,{id:"nationalite",type:"text",name:"nationalite",value:t.nationalite,className:"mt-1 block w-full",onChange:s=>i("nationalite",s.target.value)})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"montant",children:"Mode de paiement (*)"}),e.jsxs("select",{className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${h.montant?"border-red-500":""}`,value:t.mode_paiement,onChange:s=>i(a=>({...a,mode_paiement:s.target.value})),children:[e.jsx("option",{value:"",children:"Sélectionnez"}),e.jsx("option",{value:"caisse",children:"Caisse"}),e.jsx("option",{value:"mobile",children:"Mobile monaie"}),e.jsx("option",{value:"carte",children:"Carte prépayée"})]})]}),t.mode_paiement=="mobile"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"telephone",children:"Numéro de téléphone (*)"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"telephone",type:"tel",placeholder:"Votre numéro de téléphone",onChange:s=>{i(a=>({...a,phone:s.target.value}))},value:t.phone})]}),t.mode_paiement=="carte"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"carte",children:"Numéro de la carte (*)"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"carte",type:"text",placeholder:"Numéro de la carte",onChange:s=>{i(a=>({...a,carte:s.target.value}))},value:t.carte})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx(o,{htmlFor:"fichiers",value:"Joindre des fichiers (*)"}),e.jsx("input",{id:"fichiers",type:"file",name:"fichiers",multiple:!0,className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",onChange:s=>i("fichiers",s.target.files)}),e.jsx(f,{message:h.fichiers,className:"mt-2"})]})]}),l===2&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Récapitulatif"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Nom:"})," ",t.nom]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Prénom:"})," ",t.prenom]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Téléphone:"})," ",t.phone]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Numéro de compte:"})," ",t.numero_compte]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Montant:"})," ",t.montant]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Adresse:"})," ",t.address]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Ville:"})," ",t.city]}),e.jsxs("div",{children:[e.jsx("strong",{children:"BP:"})," ",t.bp]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Employeur:"})," ",t.employeur]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Pièce:"})," ",t.piece_identite]}),e.jsxs("div",{children:[e.jsx("strong",{children:"N° Pièce:"})," ",t.numero_piece_identite]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date délivrance:"})," ",t.date_de_delivrance_piece_identite]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date naissance:"})," ",t.date_naissance]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Lieu naissance:"})," ",t.lieu_naissance]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Nationalité:"})," ",t.nationalite]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Profession:"})," ",t.profession]})]})]}),l===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Signature"}),e.jsxs("div",{className:"bg-gray-50 rounded border border-gray-200 p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"border rounded bg-white",children:e.jsx("canvas",{ref:_,className:"w-full h-48 touch-none",onMouseDown:$,onMouseMove:W,onMouseUp:E,onMouseLeave:E,onTouchStart:$,onTouchMove:W,onTouchEnd:E})}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:ie,children:"Effacer"}),e.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:re,children:"Enregistrer la signature"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aperçu"}),e.jsx("div",{className:"border rounded bg-white flex items-center justify-center h-48",children:x?e.jsx("img",{src:x,alt:"Signature",className:"max-h-44 object-contain"}):e.jsx("span",{className:"text-xs text-gray-400",children:"Aucune signature enregistrée"})})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Signez dans l'encadré ci-dessus. Utilisez votre souris ou votre doigt (mobile)."})]})]}),l===4&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Contrat"}),e.jsx("div",{className:"bg-gray-50 rounded border border-gray-200 p-2",children:e.jsxs("div",{className:"relative w-full",style:{minHeight:"40vh"},children:[!O&&e.jsx("div",{ref:C,className:"docx-container w-full h-full overflow-auto",style:{maxHeight:"70vh"}}),O&&(R||D)&&e.jsx("div",{className:"w-full",style:{height:"70vh"},children:e.jsx("iframe",{title:"Aperçu du contrat",src:R||D,style:{width:"100%",height:"100%",border:0},allow:"fullscreen"})}),!y&&!N&&!R&&!D&&e.jsxs("div",{className:"text-gray-600 space-y-2",children:[e.jsx("div",{children:"Génération de l'aperçu du contrat en cours ou indisponible."}),I&&e.jsx("div",{className:"text-red-600",children:I}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Astuces:",e.jsxs("ul",{className:"list-disc ml-5",children:[e.jsx("li",{children:"Vérifiez que vous êtes connecté."}),e.jsxs("li",{children:["Ajoutez un modèle DOCX dans ",e.jsx("code",{children:"resources/contracts/Contrat.docx"})," ou ",e.jsx("code",{children:"resources/contracts/contrat.docx"}),"."]})]})]})]})]})})]}),l===5&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Acceptation"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mention manuscrite (taper la mention)"}),e.jsx("textarea",{value:t.mention_text,onChange:s=>i("mention_text",s.target.value),className:"w-full border rounded-md p-2",rows:3,placeholder:"J'ai lu et approuvé..."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"acceptTerms",type:"checkbox",checked:t.mention_accepted,onChange:s=>i("mention_accepted",s.target.checked)}),e.jsx("label",{htmlFor:"acceptTerms",children:"J'ai lu et j'accepte les termes du contrat"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("button",{type:"button",className:`px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 text-gray-800 ${l===1?"opacity-50 cursor-not-allowed":""}`,onClick:ae,disabled:l===1,children:"Étape précédente"}),e.jsx(he,{disabled:U,children:U?"Traitement...":l===5?"Soumettre la demande":"Continuer"})]})]})]}),e.jsx(xe,{})]})};export{Ae as default};
