import{r as g,j as l,a as U,J as j,f as X}from"./app-DRiTC23B.js";import{R as Y}from"./ResponsableLayout-Yi9MR-iz.js";import{q as Z,S as N,h as v,B as T,G as n,L as V,P as B,b as t,d as u,i,j as s,k as q,l as ee,m as le,p as re,n as ne,o as oe,A as ae}from"./index-D0USVWb4.js";import{L as de,f as ce,A as me,D as I,F as xe}from"./FilterList-B2I-5lCm.js";import"./Dropdown-fOO3v305.js";import"./transition-B2SWfw9G.js";import"./clsx-B-dksMZM.js";import"./index-BRCYZbNt.js";i.register(s,q,ee,le,re,ne,oe,ae);const o=({title:e,value:c,subtitle:h,color:f="primary",bg:S=""})=>l.jsx(t,{elevation:2,sx:{height:"100%"},style:{backgroundColor:S},children:l.jsxs(u,{children:[l.jsx(v,{color:"textSecondary",gutterBottom:!0,variant:"subtitle2",children:e}),l.jsx(v,{variant:"h4",component:"div",color:f,sx:{mb:1},children:c}),h&&l.jsx(v,{variant:"body2",color:"textSecondary",children:h})]})}),Ae=({statistiques:e})=>{var A,C,F,y,D,L,_,M,w,E,P,R,$,k,J;const[c,h]=g.useState({date_debut:e==null?void 0:e.filtres.date_debut,date_fin:e==null?void 0:e.filtres.date_fin}),f=(r,a)=>{h(d=>({...d,[r]:a}))},S=()=>{X.get(route("responsable_ritel.dashboard"),c,{preserveState:!0,preserveScroll:!0})},O=()=>{window.location.href=route("statistiques.export",c)},W=g.useMemo(()=>({labels:e==null?void 0:e.demandesParJour.map(r=>r.date),datasets:[{label:"Demandes par jour",data:e==null?void 0:e.demandesParJour.map(r=>r.total),borderColor:"rgb(75, 192, 192)",tension:.4,fill:!1},{label:"Montant total par jour",data:e==null?void 0:e.demandesParJour.map(r=>r.montant_total),borderColor:"rgb(255, 99, 132)",tension:.4,yAxisID:"y1",fill:!1}]}),[e]),z=g.useMemo(()=>({labels:["En attente","Validées","Rejetées","Débloquées"],datasets:[{data:[e==null?void 0:e.demandesEnAttente,e==null?void 0:e.demandesValidees,e==null?void 0:e.demandesRejetees,e==null?void 0:e.demandesDebloquees],backgroundColor:["rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(255, 99, 132)","rgb(54, 162, 235)"]}]}),[e]),G={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Évolution des demandes et montants",font:{size:16}}},scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Nombre de demandes"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Montant total"},grid:{drawOnChartArea:!1}}}},H=g.useMemo(()=>{var r,a,d,m,x,p;return{labels:(a=(r=e==null?void 0:e.avSalaires)==null?void 0:r.parJour)==null?void 0:a.map(b=>b.date),datasets:[{label:"Avances par jour",data:(m=(d=e==null?void 0:e.avSalaires)==null?void 0:d.parJour)==null?void 0:m.map(b=>b.total),borderColor:"rgb(153, 102, 255)",tension:.4,fill:!1},{label:"Montant total par jour",data:(p=(x=e==null?void 0:e.avSalaires)==null?void 0:x.parJour)==null?void 0:p.map(b=>b.montant_total),borderColor:"rgb(255, 159, 64)",tension:.4,yAxisID:"y1",fill:!1}]}},[e]),K=g.useMemo(()=>{var a,d,m,x,p;const r=((a=e==null?void 0:e.avSalaires)==null?void 0:a.parStatut)||{};return{labels:["En attente","Validées","Rejetées","Débloquées"],datasets:[{data:[((d=r["en attente"])==null?void 0:d.total)||0,((m=r.accepte)==null?void 0:m.total)||0,((x=r.rejete)==null?void 0:x.total)||0,((p=r.debloque)==null?void 0:p.total)||0],backgroundColor:["rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(255, 99, 132)","rgb(54, 162, 235)"]}]}},[e]),Q={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Évolution des avances sur salaires",font:{size:16}}},scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Nombre d'avances"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Montant total"},grid:{drawOnChartArea:!1}}}};return l.jsxs(Y,{header:"Tableau de bord",children:[l.jsx(U,{title:"Tableau de bord"}),l.jsx(Z,{elevation:0,sx:{p:2,mb:3},children:l.jsxs(N,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:{xs:"stretch",sm:"center"},justifyContent:"space-between",children:[l.jsx(v,{variant:"h6",component:"h2",children:"Filtres"}),l.jsxs(N,{direction:{xs:"column",sm:"row"},spacing:2,width:{xs:"100%",sm:"auto"},children:[l.jsxs(de,{dateAdapter:me,adapterLocale:ce,children:[l.jsx(I,{label:"Date de début",value:c.date_debut,onChange:r=>f("date_debut",r),slotProps:{textField:{fullWidth:!0}}}),l.jsx(I,{label:"Date de fin",value:c.date_fin,onChange:r=>f("date_fin",r),slotProps:{textField:{fullWidth:!0}}})]}),l.jsx(T,{variant:"contained",startIcon:l.jsx(xe,{}),onClick:S,fullWidth:!0,children:"Filtrer"}),l.jsx(T,{variant:"outlined",onClick:O,fullWidth:!0,children:"Exporter"})]})]})}),l.jsxs(n,{container:!0,spacing:2,sx:{mb:3},children:[l.jsx(n,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:l.jsx(j,{href:route("responsable_ritel.demandes.all"),children:l.jsx(o,{title:"Total des demandes",value:e==null?void 0:e.totalDemandes,subtitle:`Montant total: ${e==null?void 0:e.montantTotal.toLocaleString()} FCFA`,bg:""})})}),l.jsx(n,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:l.jsx(j,{href:route("responsable_ritel.demandes.all-en-attente"),children:l.jsx(o,{title:"Demandes en attente",value:e==null?void 0:e.demandesEnAttente,subtitle:`Montant: ${e==null?void 0:e.montantEnAttente.toLocaleString()} FCFA`,color:"warning.main",bg:"#FFCD56"})})}),l.jsx(n,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:l.jsx(j,{href:route("responsable_ritel.demandes.all-acceptees"),children:l.jsx(o,{title:"Demandes validées",value:e==null?void 0:e.demandesValidees,subtitle:`Montant: ${e==null?void 0:e.montantValide.toLocaleString()} FCFA`,color:"success.main",bg:"#4bc0c0"})})}),l.jsx(n,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:l.jsx(j,{href:route("responsable_ritel.demandes.all-debloques"),children:l.jsx(o,{title:"Demandes débloquées",value:e==null?void 0:e.demandesDebloquees,subtitle:`Montant: ${e==null?void 0:e.montantDebloque.toLocaleString()} FCFA`,color:"info.main",bg:"#36A2EB"})})}),l.jsx(n,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:l.jsx(j,{href:route("responsable_ritel.demandes.all-rejetees"),children:l.jsx(o,{title:"Demandes rejetées",value:e==null?void 0:e.demandesRejetees,subtitle:`Montant: ${e==null?void 0:e.montantRejete.toLocaleString()} FCFA`,color:"error.main",bg:"#ff6384"})})})]}),l.jsxs(n,{container:!0,spacing:2,sx:{mb:3},children:[l.jsx(n,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:l.jsx(o,{title:"Total Avances sur salaire",value:(A=e==null?void 0:e.avSalaires)==null?void 0:A.total,subtitle:`Montant total: ${(F=(C=e==null?void 0:e.avSalaires)==null?void 0:C.montantTotal)==null?void 0:F.toLocaleString()} FCFA`,bg:""})}),l.jsx(n,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:l.jsx(o,{title:"Avances en attente",value:(y=e==null?void 0:e.avSalaires)==null?void 0:y.enAttente,color:"warning.main",bg:"#FFCD56",subtitle:`Montant: ${(L=(D=e==null?void 0:e.avSalaires)==null?void 0:D.montantEnAttente)==null?void 0:L.toLocaleString()} FCFA`})}),l.jsx(n,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:l.jsx(o,{title:"Avances validées",value:(_=e==null?void 0:e.avSalaires)==null?void 0:_.validees,color:"success.main",bg:"#4bc0c0",subtitle:`Montant: ${(w=(M=e==null?void 0:e.avSalaires)==null?void 0:M.montantValide)==null?void 0:w.toLocaleString()} FCFA`})}),l.jsx(n,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:l.jsx(o,{title:"Avances débloquées",value:(E=e==null?void 0:e.avSalaires)==null?void 0:E.debloquees,color:"info.main",bg:"#36A2EB",subtitle:`Montant: ${(R=(P=e==null?void 0:e.avSalaires)==null?void 0:P.montantDebloque)==null?void 0:R.toLocaleString()} FCFA`})}),l.jsx(n,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:l.jsx(o,{title:"Avances rejetées",value:($=e==null?void 0:e.avSalaires)==null?void 0:$.rejetees,color:"error.main",bg:"#ff6384",subtitle:`Montant: ${(J=(k=e==null?void 0:e.avSalaires)==null?void 0:k.montantRejete)==null?void 0:J.toLocaleString()} FCFA`})})]}),l.jsxs("div",{className:"flex gap-4  flex-row",children:[l.jsx("div",{className:"w-full flex-1",children:l.jsx(V,{options:G,data:W})}),l.jsx("div",{className:"w-full flex-1",children:l.jsx(B,{data:z})})]}),l.jsxs("div",{className:"flex gap-4 flex-row mt-8",children:[l.jsx("div",{className:"w-full flex-1",children:l.jsx(V,{options:Q,data:H})}),l.jsx("div",{className:"w-full flex-1",children:l.jsx(B,{data:K})})]})]})};export{Ae as default};
