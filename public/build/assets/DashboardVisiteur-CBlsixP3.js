import{r as h,j as r,a as D,J as d,f as A}from"./app-DbyA3mvE.js";import"./Dropdown-BFV5wbVP.js";import{q as S,S as b,h as x,B as j,G as o,L,P as E,b as _,d as w,i as P,j as M,k,l as V,m as R,p as J,n as T,o as $,A as B}from"./index-ZvPyVhIl.js";import{L as I,f as N,A as W,D as g,F as z}from"./FilterList-DrC_4qns.js";import{V as G}from"./VisiteurLayout-C1zH5-88.js";import"./transition-Cm4bD9Fw.js";import"./clsx-B-dksMZM.js";import"./index-BO6MDd1V.js";P.register(M,k,V,R,J,T,$,B);const a=({title:e,value:l,subtitle:m,color:c="primary",bg:p=""})=>r.jsx(_,{elevation:2,sx:{height:"100%"},style:{backgroundColor:p},children:r.jsxs(w,{children:[r.jsx(x,{color:"textSecondary",gutterBottom:!0,variant:"subtitle2",children:e}),r.jsx(x,{variant:"h4",component:"div",color:c,sx:{mb:1},children:l}),m&&r.jsx(x,{variant:"body2",color:"textSecondary",children:m})]})}),u=({statistiques:e})=>{const[l,m]=h.useState({date_debut:e==null?void 0:e.filtres.date_debut,date_fin:e==null?void 0:e.filtres.date_fin}),c=(n,F)=>{m(y=>({...y,[n]:F}))},p=()=>{A.get(route("visiteur.dashboard"),l,{preserveState:!0,preserveScroll:!0})},f=()=>{window.location.href=route("statistiques.export",l)},t=h.useMemo(()=>({labels:e==null?void 0:e.demandesParJour.map(n=>n.date),datasets:[{label:"Demandes par jour",data:e==null?void 0:e.demandesParJour.map(n=>n.total),borderColor:"rgb(75, 192, 192)",tension:.4,fill:!1},{label:"Montant total par jour",data:e==null?void 0:e.demandesParJour.map(n=>n.montant_total),borderColor:"rgb(255, 99, 132)",tension:.4,yAxisID:"y1",fill:!1}]}),[e]),v=h.useMemo(()=>({labels:["En attente","Validées","Rejetées","Débloquées"],datasets:[{data:[e==null?void 0:e.demandesEnAttente,e==null?void 0:e.demandesValidees,e==null?void 0:e.demandesRejetees,e==null?void 0:e.demandesDebloquees],backgroundColor:["rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(255, 99, 132)","rgb(54, 162, 235)"]}]}),[e]),C={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Évolution des demandes et montants",font:{size:16}}},scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Nombre de demandes"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Montant total"},grid:{drawOnChartArea:!1}}}};return r.jsxs(G,{header:"Tableau de bord",children:[r.jsx(D,{title:"Tableau de bord"}),r.jsx(S,{elevation:0,sx:{p:2,mb:3},children:r.jsxs(b,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:{xs:"stretch",sm:"center"},justifyContent:"space-between",children:[r.jsx(x,{variant:"h6",component:"h2",children:"Filtres"}),r.jsxs(b,{direction:{xs:"column",sm:"row"},spacing:2,width:{xs:"100%",sm:"auto"},children:[r.jsxs(I,{dateAdapter:W,adapterLocale:N,children:[r.jsx(g,{label:"Date de début",value:l.date_debut,onChange:n=>c("date_debut",n),slotProps:{textField:{fullWidth:!0}}}),r.jsx(g,{label:"Date de fin",value:l.date_fin,onChange:n=>c("date_fin",n),slotProps:{textField:{fullWidth:!0}}})]}),r.jsx(j,{variant:"contained",startIcon:r.jsx(z,{}),onClick:p,fullWidth:!0,children:"Filtrer"}),r.jsx(j,{variant:"outlined",onClick:f,fullWidth:!0,children:"Exporter"})]})]})}),r.jsxs(o,{container:!0,spacing:2,sx:{mb:3},children:[r.jsx(o,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:r.jsx(d,{href:route("visiteur.demandes.all"),children:r.jsx(a,{title:"Total des demandes",value:e==null?void 0:e.totalDemandes,subtitle:`Montant total: ${e==null?void 0:e.montantTotal.toLocaleString()} FCFA`,bg:""})})}),r.jsx(o,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:r.jsx(d,{href:route("visiteur.demandes.all-en-attente"),children:r.jsx(a,{title:"Demandes en attente",value:e==null?void 0:e.demandesEnAttente,subtitle:`Montant: ${e==null?void 0:e.montantEnAttente.toLocaleString()} FCFA`,color:"warning.main",bg:"#FFCD56"})})}),r.jsx(o,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:r.jsx(d,{href:route("visiteur.demandes.all-acceptees"),children:r.jsx(a,{title:"Demandes validées",value:e==null?void 0:e.demandesValidees,subtitle:`Montant: ${e==null?void 0:e.montantValide.toLocaleString()} FCFA`,color:"success.main",bg:"#4bc0c0"})})}),r.jsx(o,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:r.jsx(d,{href:route("visiteur.demandes.all-debloques"),children:r.jsx(a,{title:"Demandes débloquées",value:e==null?void 0:e.demandesDebloquees,subtitle:`Montant: ${e==null?void 0:e.montantDebloque.toLocaleString()} FCFA`,color:"info.main",bg:"#36A2EB"})})}),r.jsx(o,{item:!0,xs:12,sm:6,md:4,lg:2.4,children:r.jsx(d,{href:route("visiteur.demandes.all-rejetees"),children:r.jsx(a,{title:"Demandes rejetées",value:e==null?void 0:e.demandesRejetees,subtitle:`Montant: ${e==null?void 0:e.montantRejete.toLocaleString()} FCFA`,color:"error.main",bg:"#ff6384"})})})]}),r.jsxs("div",{className:"flex gap-4  flex-row",children:[r.jsx("div",{className:"w-full flex-1",children:r.jsx(L,{options:C,data:t})}),r.jsx("div",{className:"w-full flex-1",children:r.jsx(E,{data:v})})]})]})};export{u as default};
