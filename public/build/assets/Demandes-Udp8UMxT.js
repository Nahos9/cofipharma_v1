import{r as i,S as b,j as e,a as f,f as j}from"./app-DD3k6qJ9.js";import{y as m,N as y,L as N}from"./index-B4LLNpE4.js";/* empty css                      */import"./button-DX6rFrL7.js";import"./clsx-B-dksMZM.js";import"./createLucideIcon-D5LIkTyb.js";import"./x-u4f4VwFb.js";const D=()=>{const[d,c]=i.useState([]),[p,v]=i.useState(""),{data:s,setData:n,post:u,processing:r,errors:o}=b({first_name:"",last_name:"",email:"",montant:"",numero_compte:"",phone:"",carte:"",mode_paiement:"",files:[]});i.useEffect(()=>{Object.keys(o).length>0&&m.error("Veuillez corriger les erreurs dans le formulaire",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},[o]);const h=a=>{const t=Array.from(a.target.files);c(t),n(l=>({...l,files:t}))},x=a=>{a.preventDefault();const t=new FormData;t.append("first_name",s.first_name),t.append("last_name",s.last_name),t.append("email",s.email),t.append("numero_compte",s.numero_compte),t.append("montant",s.montant),t.append("phone",s.phone),t.append("mode_paiement",p),s.files.forEach((l,g)=>{t.append(`files[${g}]`,l)}),u(route("demandes.store"),{forceFormData:!0,onSuccess:()=>{n({first_name:"",last_name:"",email:"",montant:"",phone:"",numero_compte:"",files:[]}),c([]),m.success("ðŸŽ‰ FÃ©licitations ! Votre demande a Ã©tÃ© envoyÃ©e avec succÃ¨s.",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,className:"bg-green-500 text-white",bodyClassName:"font-bold"}),setTimeout(()=>{j.visit(route("welcome"))},1500)},onError:l=>{m.error("Une erreur est survenue lors de l'envoi de la demande",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}})};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(f,{title:"Demandes"}),e.jsx(y,{}),e.jsx(N,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),e.jsxs("div",{className:"max-w-2xl mx-auto p-4 sm:p-6",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6 text-gray-800 text-center sm:text-left",children:"Nouvelle Demande CofiPharma"}),e.jsxs("form",{className:"bg-white shadow-md rounded-lg px-4 sm:px-8 pt-6 pb-8 mb-4",onSubmit:x,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"nom",children:"Nom (*)"}),e.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${o.first_name?"border-red-500":""}`,id:"nom",type:"text",placeholder:"Votre nom",onChange:a=>{n(t=>({...t,first_name:a.target.value}))},value:s.first_name}),o.first_name&&e.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:o.first_name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"prenom",children:"PrÃ©nom"}),e.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${o.last_name?"border-red-500":""}`,id:"prenom",type:"text",placeholder:"Votre prÃ©nom",onChange:a=>{n(t=>({...t,last_name:a.target.value}))},value:s.last_name}),o.last_name&&e.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:o.last_name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email (*)"}),e.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${o.email?"border-red-500":""}`,id:"email",type:"email",placeholder:"Votre email",onChange:a=>{n(t=>({...t,email:a.target.value}))},value:s.email}),o.email&&e.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:o.email})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"numero_compte",children:"NumÃ©ro de compte courant (*)"}),e.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${o.numero_compte?"border-red-500":""}`,id:"numero_compte",type:"text",inputMode:"numeric",placeholder:"Votre numÃ©ro de compte",pattern:"^371.*",onInvalid:a=>a.currentTarget.setCustomValidity("Le numÃ©ro de compte doit commencer par 371"),onInput:a=>a.currentTarget.setCustomValidity(""),onChange:a=>{const t=a.target.value;t&&!t.startsWith("371")?a.target.setCustomValidity("Le numÃ©ro de compte doit commencer par 371"):a.target.setCustomValidity(""),n(l=>({...l,numero_compte:t}))},value:s.numero_compte,required:!0}),o.numero_compte&&e.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:o.numero_compte})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"telephone",children:"TÃ©lÃ©phone"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"telephone",type:"tel",placeholder:"Votre numÃ©ro de tÃ©lÃ©phone",onChange:a=>{n(t=>({...t,phone:a.target.value}))},value:s.phone})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"montant",children:"Mode de paiement (*)"}),e.jsxs("select",{name:"",id:"",className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${o.montant?"border-red-500":""}`,value:s.mode_paiement,onChange:a=>n(t=>({...t,mode_paiement:a.target.value})),children:[e.jsx("option",{value:"caisse",children:"Caisse"}),e.jsx("option",{value:"mobile",children:"Mobile monaie"}),e.jsx("option",{value:"carte",children:"Carte prÃ©payÃ©e"})]})]}),s.mode_paiement=="mobile"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"telephone",children:"NumÃ©ro de tÃ©lÃ©phone (*)"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"telephone",type:"tel",placeholder:"Votre numÃ©ro de tÃ©lÃ©phone",onChange:a=>{n(t=>({...t,phone:a.target.value}))},value:s.phone})]}),s.mode_paiement=="carte"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"telephone",children:"NumÃ©ro de la carte (*)"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"telephone",type:"tel",placeholder:"Votre numÃ©ro de tÃ©lÃ©phone",onChange:a=>{n(t=>({...t,carte:a.target.value}))},value:s.carte})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"montant",children:"Montant (*)"}),e.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${o.montant?"border-red-500":""}`,id:"montant",type:"number",step:"0.01",placeholder:"Montant de la demande",onChange:a=>{n(t=>({...t,montant:a.target.value}))},value:s.montant}),o.montant&&e.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:o.montant})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"files",children:"Documents (PDF, Images) (*)"}),e.jsx("input",{className:`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${o.files?"border-red-500":""}`,id:"files",type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",onChange:h}),o.files&&e.jsx("p",{className:"text-red-500 text-xs italic mt-1",children:o.files}),d.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Fichiers sÃ©lectionnÃ©s :"}),e.jsx("ul",{className:"mt-1 text-sm text-gray-500",children:d.map((a,t)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"â€¢"}),a.name," (",(a.size/1024).toFixed(2)," KB)"]},t))})]})]}),e.jsx("div",{className:"flex items-center justify-center sm:justify-between",children:e.jsx("button",{className:`w-full sm:w-auto bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline ${r?"opacity-50 cursor-not-allowed":""}`,type:"submit",disabled:r,children:r?"Envoi en cours...":"Envoyer la demande"})})]})]})]})};export{D as default};
